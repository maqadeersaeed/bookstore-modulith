server:
  port: 8080

# JWT configuration
app:
  jwt:
    secret: "THIS_IS_A_LONG_RANDOM_256BIT_SECRET_KEY_CHANGE_IN_PROD_1234567890"
    expiration-ms: 3600000      # 1 hour

spring:
  application:
    name: bookstore-modulith

  datasource:
    url: jdbc:postgresql://localhost:5432/bookstore
    username: postgres
    password: 1234
    driver-class-name: org.postgresql.Driver
    # Hikari base config (sane defaults, overridden per profile)
    hikari:
      pool-name: bookstore-hikari-pool
      maximum-pool-size: 5        # override per profile if needed
      minimum-idle: 2
      idle-timeout: 300000         # 5 min
      max-lifetime: 900000         # 15 min
      connection-timeout: 30000    # 30 sec

  jpa:
    hibernate:
      ddl-auto: update        # overridden in prod
    show-sql: true           # overridden in dev
    properties:
      hibernate.format_sql: true
      hibernate.dialect: org.hibernate.dialect.PostgreSQLDialect
      hibernate:
        default_schema: bookstore

  # Flyway
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration
    default-schema: bookstore
    schemas: bookstore

  # Modulith settings (for documentation + events)
  modulith:
    events:
      jdbc:
        enabled: false          # disable event persistence for now
    documentation:
      enabled: true             # enable module diagram generation

# Logging
logging:
  level:
    root: INFO
    org.springframework.security: DEBUG
    org.springframework.web: DEBUG
    org.hibernate.SQL: DEBUG
    com.qadeersaeed.bookstore: DEBUG

# Actuator (Health + Info endpoints)
management:
  endpoints:
    web:
      exposure:
        include: health, info, env, beans, mappings
